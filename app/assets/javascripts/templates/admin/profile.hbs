<div class="display_card">
  <div class="card-section section-with-photo">
    <div class="section-photo">
      {{user-picture model.username model.last_photo_updated}}
    </div>

    {{#if model.last_login}}
      {{pretty-timestamp model.last_login}}
    {{/if}}

    <span class="title big-title">
      {{display-name-plus-username model.username model.display_name}}
    </span>

    <div class="form">
      {{#if role_tho}}
        <button class="btn" {{action 'get_regcode' model.username}}>Get Registration Code</button>
        <button class="btn" {{action 'reset_password' model.username}}>Reset Password</button>
      {{/if}}
      {{#if model.empty_password}}
        <span style="color: darkred; padding-left: 1em;">
          Empty password!
        </span>
      {{/if}}
      <button class="btn" {{action 'reset_photo' model.username}}>Reset Photo</button>
      <div class="row" style="margin: 1em 0;">
        <div class="col-md-4">
          <div class="form-group">
            <label for="role">Role:</label>
              {{view "select" id="role" content=roles optionLabelPath="content.label" optionValuePath="content.value" value=model.role}}
              {{#if errors.role}}
                <ul class="alert alert-warning" style="padding-left: 2em;">
                  {{#each error in errors.role}}
                    <li>{{error}}</li>
                  {{/each}}
                </ul>
              {{/if}}
          </div>
        </div>
      </div>
      <div class="row" style="margin: 1em 0;">
        <div class="col-md-4">
          <div class="form-group">
            <label for="display_name">Display Name</label>
            {{input value=model.display_name class='input' maxlength='40' name="display_name"}}
            {{#if errors.display_name}}
              <ul class="alert alert-warning" style="padding-left: 2em;">
                {{#each error in errors.display_name}}
                  <li>{{error}}</li>
                {{/each}}
              </ul>
            {{/if}}
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="email">Email</label>
            {{ input value=model.email class='input' name="email"}}
            {{#if errors.email}}
              <ul class="alert alert-warning" style="padding-left: 2em;">
                {{#each error in errors.email}}
                  <li>{{error}}</li>
                {{/each}}
              </ul>
            {{/if}}
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="home_location">Home Location</label>
            {{input value=model.home_location class='input' maxlength='100' name="home_location"}}
            {{#if errors.home_location}}
              <ul class="alert alert-warning" style="padding-left: 2em;">
                {{#each error in errors.home_location}}
                  <li>{{error}}</li>
                {{/each}}
              </ul>
            {{/if}}
          </div>
        </div>
      </div>
      <div class="row" style="margin: 1em 0;">
        <div class="col-md-4">
          <div class="form-group">
            <label for="real_name">Real Name</label>
            {{input value=model.real_name class='input' maxlength='100' name="real_name"}}
            {{#if errors.real_name}}
              <ul class="alert alert-warning" style="padding-left: 2em;">
                {{#each error in errors.real_name}}
                  <li>{{error}}</li>
                {{/each}}
              </ul>
            {{/if}}
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="room_number">Room Number</label>
            {{input value=model.room_number class='input' maxlength='5' name="room_number"}}
            {{#if errors.room_number}}
              <ul class="alert alert-warning" style="padding-left: 2em;">
                {{#each error in errors.room_number}}
                  <li>{{error}}</li>
                {{/each}}
              </ul>
            {{/if}}
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="pronouns">Preferred Pronouns</label>
            {{input value=model.pronouns class='input' maxlength='100' name="pronouns"}}
            {{#if errors.pronouns}}
              <ul class="alert alert-warning" style="padding-left: 2em;">
                {{#each error in errors.pronouns}}
                  <li>{{error}}</li>
                {{/each}}
              </ul>
            {{/if}}
          </div>
          <div class="form-group">
          </div>
        </div>
      </div>
      <div class="row" style="margin: 1em 0;">
        <div class="col-md-4"></div>
        <div class="col-md-4"></div>
        <div class="col-md-4">
          <div class="form-group">
            {{input type='checkbox' checked=model.show_pronouns name='display_pronouns' id='display_pronouns'}}
            <label for="display_pronouns">Display preferred pronouns on posts</label>
          </div>
        </div>
      </div>
      <div>
        {{#if is_muted}}
          <div>
            <label for="mute_reason">Mute Reason:</label>
            {{textarea value=model.mute_reason rows='3' class='input' name="mute_reason"}}
            {{#if errors.mute_reason}}
              <ul class="alert alert-warning" style="padding-left: 2em;">
                {{#each error in errors.mute_reason}}
                  <li>{{error}}</li>
                {{/each}}
              </ul>
            {{/if}}
          </div>
        {{/if}}
        {{#if is_banned}}
          <div>
            <label for="ban_reason">Ban Reason:</label>
              {{textarea value=model.ban_reason rows='3' class='input' name="ban_reason"}}
              {{#if errors.ban_reason}}
                <ul class="alert alert-warning" style="padding-left: 2em;">
                  {{#each error in errors.ban_reason}}
                    <li>{{error}}</li>
                  {{/each}}
                </ul>
              {{/if}}
          </div>
        {{/if}}
      </div>
      <div class="row" style="margin: 0.5em 1em;">
        <button class="btn" {{action 'save' model}}>Save Changes</button>
      </div>
    </div>
  </div>
</div>
